<h3 class="mt-4">Ajouter un livre</h3>

<form [formGroup]="infoBook" (ngSubmit)="addBook()">
  <div class="form-group m-2">
    <label>
      Titre:
      <input class="form-control" type="text" formControlName="title">
    </label>
    @if (submitted && infoBook.controls['title'].invalid) {
    <div class="text-danger">
      Le titre est requis
    </div>
  }
  </div>

<div class="form-group m-2">
  <label class="form-label m-2" for="author">Choisir un auteur existant :</label>
    <div class="dropdown m-2">
      <select id="authorId" formControlName="idAuthor">
      <option class='dropdown-item'value="">Choisissez un auteur</option>
      @for (author of authors; track $index) {
        <option class="dropdown-item" value="{{author.id}}">{{ author.lastName }} {{ author.firstName }}</option>
      }
      </select>
    </div>
</div>
  <!-- @if (infoBook.get('authorId') && submitted) {
  <div>L'auteur est requis</div> }-->


  <button class="btn btn-info m-2" type="button" (click)="showAuthorAddForm = !showAuthorAddForm">
    {{ showAuthorAddForm ? 'Annuler l\'ajout de l\'auteur' : 'Ou ajouter un auteur' }}
  </button>

  <div class="m-2">
    @if (showAuthorAddForm) {
    <app-author-add (authorAdded)="onAuthorAdded($event)"></app-author-add>
  }
  </div>


  <div class="form-group m-2">
    <label>
      CoverText:
      <input class="form-control" type="text" formControlName="coverText">
    </label>
  </div>

  <div class="form-group m-2">
    <label>
      Commentaire:
      <input class="form-control" type="text" formControlName="comment">
    </label>
  </div>

  <button class="btn btn-primary m-3" type="submit">Ajouter un livre</button>
</form>

<div class="m-2">
<a routerLink="/panel"  class="btn btn-secondary">Retourner au panel</a>
</div>
